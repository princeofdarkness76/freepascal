#
#   Makefile.fpc for running fpmake
#

[package]
name=univint
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
version=3.1.1

[require]
packages=rtl fpmkunit

=======
=======
>>>>>>> graemeg/cpstrnew
=======
>>>>>>> graemeg/cpstrnew
version=2.5.1

[target]
units=MacOSAll MacOS
implicitunits=ABActions ABAddressBook ABGlobals ABPeoplePicker ABTypedefs AEDataModel \
  AEHelpers AEInteraction AEMach AEObjects AEPackObject AERegistry \
  AEUserTermTypes AIFF ASDebugging ASRegistry ATSFont ATSLayoutTypes \
  ATSTypes ATSUnicodeDirectAccess ATSUnicodeDrawing ATSUnicodeFlattening \
  ATSUnicodeFonts ATSUnicodeGlyphs ATSUnicodeObjects ATSUnicodeTypes \
  AUComponent AVLTree AXActionConstants AXAttributeConstants AXConstants \
  AXErrors AXNotificationConstants AXRoleConstants AXTextAttributedString \
  AXUIElement AXValue AXValueConstants Accessibility Aliases Appearance \
  AppleDiskPartitions AppleEvents AppleHelp AppleScript AudioCodecs \
  AudioComponents AudioHardware AudioOutputUnit AudioUnitCarbonViews \
  AudioUnitParameters AudioUnitProperties AuthSession Authorization \
  AuthorizationDB AuthorizationPlugin AuthorizationTags BackupCore CFArray \
  CFAttributedString CFBag CFBase CFBinaryHeap CFBitVector CFBundle \
  CFByteOrders CFCalendar CFCharacterSet CFData CFDate CFDateFormatter \
  CFDictionary CFError CFFTPStream CFHTTPAuthentication CFHTTPMessage \
  CFHTTPStream CFHost CFLocale CFMachPort CFMessagePort CFNetDiagnostics \
  CFNetServices CFNetworkErrorss CFNotificationCenter CFNumber \
  CFNumberFormatter CFPlugIn CFPlugInCOM CFPreferences CFPropertyList \
  CFProxySupport CFRunLoop CFSet CFSocket CFSocketStream CFStream CFString \
  CFStringEncodingExt CFStringTokenizer CFTimeZone CFTree CFURL CFURLAccess \
  CFUUID \
  CFUserNotification CFXMLNode CFXMLParser CGAffineTransforms CGBase \
  CGBitmapContext CGColor CGColorSpace CGContext CGDataConsumer \
  CGDataProvider CGDirectDisplay CGDirectPalette CGDisplayConfiguration \
  CGDisplayFades CGErrors CGEvent CGEventSource CGEventTypes CGFont \
  CGFunction CGGLContext CGGeometry CGGradient CGImage CGImageDestination \
  CGImageProperties CGImageSource CGLCurrent CGLDevice CGLProfiler \
  CGLProfilerFunctionEnums CGLRenderers CGLTypes CGLayer CGPDFArray \
  CGPDFContentStream CGPDFContext CGPDFDictionary CGPDFDocument CGPDFObject \
  CGPDFOperatorTable CGPDFPage CGPDFScanner CGPDFStream CGPDFString \
  CGPSConverter CGPath CGPattern CGRemoteOperation CGSession CGShading \
  CGWindow CGWindowLevels CMCalibrator CSIdentity CSIdentityAuthority \
  CSIdentityQuery CTFont CTFontCollection CTFontDescriptor CTFontManager \
  CTFontManagerErrors CTFontTraits CTFrame CTFramesetter CTGlyphInfo CTLine \
  CTParagraphStyle CTRun CTStringAttributes CTTextTab CTTypesetter CVBase \
  CVBuffer CVDisplayLink CVHostTime CVImageBuffer CVOpenGLBuffer \
  CVOpenGLBufferPool CVOpenGLTexture CVOpenGLTextureCache CVPixelBuffer \
  CVPixelBufferPool CVPixelFormatDescription CVReturns CarbonEvents \
  CarbonEventsCore CodeFragments Collections ColorPicker ColorSyncCMM \
  ColorSyncDeprecated ColorSyncDevice ColorSyncProfile ColorSyncTransform \
  Components ConditionalMacros ControlDefinitions Controls CoreAudioTypes \
  CoreFoundation CoreGraphics CoreText DADisk DASession \
  DHCPClientPreferences DateTimeUtils Debugging Dialogs Dictionary \
  DigitalHubRegistry Displays Drag DrawSprocket DriverServices \
  DriverSynchronization Endian Events FSEvents FileTypesAndCreators Files \
  Finder FinderRegistry FixMath Folders FontPanel FontSync Fonts GestaltEqu \
  GPCStrings \
  HFSVolumes HIAccessibility HIArchive HIButtonViews HIClockView HIComboBox \
  HIContainerViews HIDataBrowser HIDisclosureViews HIGeometry HIImageViews \
  HILittleArrows HIMenuView HIMovieView HIObject HIPopupButton \
  HIProgressViews HIRelevanceBar HIScrollView HISearchField HISegmentedView \
  HISeparator HIShape HISlider HITabbedView HITextLengthFilter HITextUtils \
  HITextViews HITheme HIToolbar HIToolbox HIToolboxDebugging HIView \
  HIWindowViews HTMLRendering HostTime IBCarbonRuntime ICAApplication \
  ICACamera ICADevice IconStorage Icons IconsCore ImageCodec \
  ImageCompression InternetConfig IntlResources \
  IOKitReturn IOSurfaceAPI KeyEvents Keyboards \
  KeychainCore KeychainHI LSInfo LSOpen LSQuarantine LSSharedFileList \
  LanguageAnalysis Lists LowMem MDExternalDatastore MDImporter MDItem \
  MDLineage MDQuery MDSchema MIDIDriver MIDIServices MIDISetup \
  MIDIThruConnection MacApplication MacErrors MacHelp MacLocales MacMemory \
  MacOSXPosix MacOpenGL MacTextEditor MacTypes MacWindows MachineExceptions \
  Math64 MediaHandlers Menus MixedMode Movies MoviesFormat \
  MultiProcessingInfo Multiprocessing MusicDevice NSL NSLCore Navigation \
  Notification NumberFormatting OSA OSAComp OSAGeneric OSUtils ObjCRuntime \
  OpenTransport OpenTransportProtocol OpenTransportProviders \
  PEFBinaryFormat PLStringFuncs PMApplication PMApplicationDeprecated \
  PMCore PMCoreDeprecated PMDefinitions PMDefinitionsDeprecated PMErrors \
  PMPrintAETypes PMPrintSettingsKeys PMPrintingDialogExtensions Palettes \
  Pasteboard PictUtils Power Processes QDCMCommon QDOffscreen \
  QDPictToCGContext \
  QLBase QLGenerator QLThumbnailImage \
  QTML QTSMovie QTStreamingComponents QuickTimeComponents \
  QuickTimeErrors QuickTimeMusic QuickTimeStreaming QuickTimeVR \
  QuickTimeVRFormat Quickdraw QuickdrawText QuickdrawTypes Resources \
  SCDynamicStore SCDynamicStoreCopyDHCPInfos SCDynamicStoreCopySpecific \
  SCDynamicStoreKey SCNetwork SCNetworkConfiguration SCNetworkConnection \
  SCNetworkReachability SCPreferences SCPreferencesPath \
  SCPreferencesSetSpecific SCSI SCSchemaDefinitions SFNTLayoutTypes \
  SFNTTypes ScalerStreamTypes Scrap Script SecBase SecTrust Sound \
  SpeechRecognition \
  SpeechSynthesis StringCompare SystemConfiguration SystemSound TSMTE \
  TextCommon TextEdit TextEncodingConverter TextEncodingPlugin \
  TextInputSources TextServices TextUtils Threads Timer ToolUtils \
  Translation TranslationExtensions TranslationServices TypeSelect \
  URLAccess UTCUtils UTCoreTypes UTType UnicodeConverter UnicodeUtilities \
  UniversalAccess Video WSMethodInvocation WSProtocolHandler WSTypes cblas \
  certextensions cssmapple cssmconfig cssmerr cssmkrapi cssmtype \
  fenv fp gliContexts gliDispatch gluContext kern_return macgl macglext \
  macglu mach_error vBLAS vDSP x509defs xattr 
exampledirs=examples

[libs]
libversion=2.0.0

# FPCMacOSAll is not a build unit, but directly includes the code of
# most other units
>>>>>>> graemeg/cpstrnew
[install]
fpcpackage=y

[default]
fpcdir=../..

[prerules]
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
FPMAKE_BIN_CLEAN=$(wildcard ./fpmake$(SRCEXEEXT))
ifdef OS_TARGET
FPC_TARGETOPT+=--os=$(OS_TARGET)
endif
ifdef CPU_TARGET
FPC_TARGETOPT+=--cpu=$(CPU_TARGET)
endif
LOCALFPMAKE=./fpmake$(SRCEXEEXT)

[rules]
# Do not pass the Makefile's unit and binary target locations. Fpmake uses it's own.
override FPCOPT:=$(filter-out -FU%,$(FPCOPT))
override FPCOPT:=$(filter-out -FE%,$(FPCOPT))
# Do not pass the package-unitdirectories. Fpmake adds those and this way they don't apear in the .fpm
override FPCOPT:=$(filter-out $(addprefix -Fu,$(COMPILER_UNITDIR)),$(FPCOPT))# Compose general fpmake-parameters
# Compose general fpmake-parameters
ifdef FPMAKEOPT
FPMAKE_OPT+=$(FPMAKEOPT)
endif
FPMAKE_OPT+=--localunitdir=../..
FPMAKE_OPT+=--globalunitdir=..
FPMAKE_OPT+=$(FPC_TARGETOPT)
FPMAKE_OPT+=$(addprefix -o ,$(FPCOPT))
FPMAKE_OPT+=--compiler=$(FPC)
FPMAKE_OPT+=-bu
.NOTPARALLEL:

fpmake$(SRCEXEEXT): fpmake.pp
	$(FPCFPMAKE) fpmake.pp $(FPMAKE_SKIP_CONFIG) $(addprefix -Fu,$(COMPILER_FPMAKE_UNITDIR)) $(FPCMAKEOPT) $(OPT)
all:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) compile $(FPMAKE_OPT)
smart:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) compile $(FPMAKE_OPT) -o -XX -o -CX
release:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) compile $(FPMAKE_OPT) -o -dRELEASE
debug:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) compile $(FPMAKE_OPT) -o -dDEBUG
# If no fpmake exists and (dist)clean is called, do not try to build fpmake, it will
# most often fail because the dependencies are cleared.
# In case of a clean, simply do nothing
ifeq ($(FPMAKE_BIN_CLEAN),)
clean:
else
clean:
	$(FPMAKE_BIN_CLEAN) clean $(FPMAKE_OPT)
endif
# In case of a distclean, perform an 'old'-style distclean. This to avoid problems
# when the package is compiled using fpcmake prior to running this clean using fpmake
ifeq ($(FPMAKE_BIN_CLEAN),)
distclean:	$(addsuffix _distclean,$(TARGET_DIRS)) fpc_cleanall
else
distclean:
ifdef inUnix
        { $(FPMAKE_BIN_CLEAN) distclean $(FPMAKE_OPT); if [ $$? != "0" ]; then { echo Something wrong with fpmake exectable. Remove the executable and call make recursively to recover.; $(DEL) $(FPMAKE_BIN_CLEAN); $(MAKE) fpc_cleanall; }; fi;  }
else
        $(FPMAKE_BIN_CLEAN) distclean $(FPMAKE_OPT)
endif
	-$(DEL) $(LOCALFPMAKE)
endif
cleanall: distclean
install:	fpmake$(SRCEXEEXT)
ifdef UNIXHier
	$(LOCALFPMAKE) install $(FPMAKE_OPT) --prefix=$(INSTALL_PREFIX) --baseinstalldir=$(INSTALL_LIBDIR)/fpc/$(FPC_VERSION) --unitinstalldir=$(INSTALL_UNITDIR)
else
	$(LOCALFPMAKE) install $(FPMAKE_OPT) --prefix=$(INSTALL_BASEDIR) --baseinstalldir=$(INSTALL_BASEDIR) --unitinstalldir=$(INSTALL_UNITDIR)
endif
# distinstall also installs the example-sources and omits the location of the source-
# files from the fpunits.cfg files.
distinstall:	fpmake$(SRCEXEEXT)
ifdef UNIXHier
	$(LOCALFPMAKE) install $(FPMAKE_OPT) --prefix=$(INSTALL_PREFIX) --baseinstalldir=$(INSTALL_LIBDIR)/fpc/$(FPC_VERSION) --unitinstalldir=$(INSTALL_UNITDIR) -ie -fsp 0
else
	$(LOCALFPMAKE) install $(FPMAKE_OPT) --prefix=$(INSTALL_BASEDIR) --baseinstalldir=$(INSTALL_BASEDIR) --unitinstalldir=$(INSTALL_UNITDIR) -ie -fsp 0
endif
zipinstall:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) zipinstall $(FPMAKE_OPT) --zipprefix=$(DIST_DESTDIR)/$(ZIPPREFIX)
zipdistinstall:	fpmake$(SRCEXEEXT)
	$(LOCALFPMAKE) zipinstall $(FPMAKE_OPT) --zipprefix=$(DIST_DESTDIR)/$(ZIPPREFIX) -ie -fsp 0
zipsourceinstall:	fpmake$(SRCEXEEXT)
ifdef UNIXHier
	$(LOCALFPMAKE) archive $(FPMAKE_OPT) --zipprefix=$(DIST_DESTDIR)/$(ZIPPREFIX) --prefix=share/src/fpc-\$$\(PACKAGEVERSION\)/$(INSTALL_FPCSUBDIR)/\$$\(PACKAGEDIRECTORY\)
else
	$(LOCALFPMAKE) archive $(FPMAKE_OPT) --zipprefix=$(DIST_DESTDIR)/$(ZIPPREFIX) --prefix=source\\$(INSTALL_FPCSUBDIR)\\\$$\(PACKAGEDIRECTORY\)
endif
=======
=======
>>>>>>> graemeg/cpstrnew
=======
>>>>>>> graemeg/cpstrnew
override FPCOPT+=-Mmacpas

[rules]
MacOSAll$(PPUEXT): $(filter-out MacOS.pas GPCStrings.pas KeyEvents.pas,$(wildcard *.pas))
MacOS$(PPUEXT): $(filter-out MacOSAll.pas,$(wildcard *.pas))
>>>>>>> graemeg/cpstrnew
